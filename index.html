<!DOCTYPE html>
<html lang="en-us">
  <head>
  <!-- CSS only -->
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
  <title>Phone Plan Picker</title>
</head>
<header>
  <div class="container">
    <h1 class="my-3">Phone Plan Picker</h1>
  </div>
</header>
<div class="container">
  <div class="form-group mb-1">
    <label>Number of Users</labels>
      <input class="form-control" placeholder="" type="number" value="5" id="number-of-users"/>
      <small class="form-text">how many users do you have?</small>
  </div>
  <div class="form-group mb-1">
    <div class="btn btn-outline-dark plus" style="font-family:monospace;"> + </div>
    <div class="btn btn-outline-dark minus" style="font-family:monospace;"> - </div>
  </div>
  <table class="table">
    <caption>Table of Mobile Plans Sorted by Price<caption>
    <thead>
      <tr class="table-head">
        <th>Carrier</th>
        <th>Unlimited</th>
      </tr>
    </thead>
    <tbody>
      
    </tbody>
  </table>
</div>
    <script>

const inputNumberOfUsers = document.getElementById("number-of-users");

document.getElementById("number-of-users").onchange = () => {
  genTable();
};

document.querySelector(".btn.plus").onclick = () => {
  console.log(inputNumberOfUsers.value);
  inputNumberOfUsers.value = parseInt(inputNumberOfUsers.value) + 1;
  genTable();
};

document.querySelector(".btn.minus").onclick = () => {
  console.log(inputNumberOfUsers.value);
  inputNumberOfUsers.value = parseInt(inputNumberOfUsers.value) - 1;
  genTable();
};

function genTable() {
  const tBody = document.querySelector("tbody");
  tBody.innerHTML = "";
  const numberOfUsers = document.getElementById("number-of-users").value;
  const getUnlimitedPlanPriceByCarrierName = (carrier) => {
    return plans[carrier].getUnlimitedPlanPrice
      ? plans[carrier]
          .getUnlimitedPlanPrice(numberOfUsers)
          .toLocaleString("en-US", {style:"currency", currency:"USD"})
      : "Unkown";
  };
  sortedPlans = Object
    .entries(plans)
    .sort((a, b) => 
          a[1].getUnlimitedPlanPrice(numberOfUsers) - b[1].getUnlimitedPlanPrice(numberOfUsers)
    )
    .reduce((r, [k, v]) => ({...r, [k]: v}), {});
  
  Object.keys(sortedPlans).map((item) => {
    console.log(plans[item]);
    const row = document.createElement("tr");
    row.innerHTML = `<td>${plans[item].label || item}</td>`;
    row.innerHTML += `<td>${getUnlimitedPlanPriceByCarrierName(item)}</td>`;
    tBody.append(row);
  });
}
      (function main() {
  genTable();
})();


    </script>
    </html>
